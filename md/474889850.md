
# zlx362211854 
 > commented 5 months ago 

#### 首先解释什么是加密
* 加密就是把一段明文，通过一个密钥，并通过某一种算法，计算出对应的一段密文，这个过程就叫加密。可以理解为(明文+密钥)*算法 = 密文。反之可以通过密文和密钥来解析出明文。

我们知道http本质上是没有任何安全措施的，https的本质是为了解决，在http传输中，数据未加密产生的安全问题，所以我们想，能不能通过一个密钥来加密我们的数据，就像上面的公式：(明文+密钥)*算法 = 密文，然后再通过http传输这个密文，这样就能解决安全问题了。

但是问题来了，客户端(client)很容易就可以实现(明文+密钥)*算法 = 密文这个步骤，但是将密文发送到服务端(server)后，服务器是没有加密密钥的，那如何根据密文解析出明文呢？

要解决这个问题其实很简单，把密钥给服务器，服务器不就能通过密钥和密文来计算出明文了吗。看似很简单，但紧接着问题来了，如何将密钥给服务器呢？每个client的密钥肯定是不一样的，如何安全的将密钥给服务端，就成了最大的问题。

其实https就是为了解决这一痛点而产生的，https做的事情很简单，就是安全的将密钥从client发送到server，让client和server都拥有这个密钥，这样就能通过密钥来加解密数据了。如何实现呢？如图：
![image](https://user-images.githubusercontent.com/22437181/62193260-015a0600-b3aa-11e9-876d-e13e70621a7d.png)

首先，server中有一个`公私钥对`，`公钥进行加密的数据，能通过私钥解密出来`，也就是非对称加密。这个公私钥对，就是用来安全传递加密密钥的。

1.  client先向server请求公钥。
2. client拿到server的公钥后，将密钥用公钥进行加密，再将加密后的密钥，传递给server。
3. server拿到client通过公钥加密后的密钥，通过自己的私钥进行解密，这样就得到了真正的密钥。
4. client和server都拿到了密钥，现在就可以使用这个密钥来进行数据传递的加密了。

这样，https的技术实现就完成了，也就是`SSL握手`环节的实现。但是问题又来了，服务器上的公私钥对，如何保证是安全的呢？比如某一台服务器的公私钥对，是从别人的服务器上盗取来的呢？

所以，需要有一个权威机构来颁布https公私钥对，也就是https证书，向权威机构申请，权威机构就会下发一个数字证书，包括了一对公私钥。这个证书是跟域名和ip地址绑定的，盗用别人的也没用。

这样，通过https，安全的数据传输就实现了
# goldEli 
 > commented 5 months ago 

>`https加密` = `对称加密` + `非对称加密`，`非对称加密`用于传输`秘钥`，双方得到`秘钥`后再通过`对称加密`来通信。

### 什么是对称加密（Symmetry Encrypted）？

小明和小王在网上聊天，为了不让别人知道他们在聊什么，于是他们约定了一个加密方法：字母后移动一位，比如小明给小王发 `I LOVE YOU`

小王接收到 `J MPWF ZPV` 后，向前移一位得到 `I LOVE YOU`。

![symmetry_encrypted](https://user-images.githubusercontent.com/18217162/62195386-79c2c600-b3ae-11e9-9322-9b43a9fd8e0f.png)


小明和小王约定的加密方法被称为秘钥（真实的秘钥当然复杂的多），秘钥只有小明和小王知道他们，所以他们就能安全的聊天。这个过程就叫对称加密。

**小明和小王约定的秘钥，是需要通过网络传输的，如果传输过程中被人窃取了呢？于是又有了非对称加密。**

### 什么是非对称加密（Asymmetric Encrypted）？

小明和小王各有一对私钥和公钥，私钥自己保存，公钥对所有人公开。公钥加密私钥解开。

比如小明给小王发消息，小明先拿到小王的公钥，然后把消息用公钥来加密，再把加密后的消息发给小王，小王用我自己的私钥解密，就得到小王给我自己发的消息了。

![asymmetric_encrypted](https://user-images.githubusercontent.com/18217162/62195885-872c8000-b3af-11e9-9df4-4a3ff6106779.png)

**小明拿到的公钥是通过网络传输的，如果公钥被人掉包了呢？怎么证明是小王的公钥呢？这就需要用到证书加密了**
    
### 什么是证书加密（Certificate Encrypted）？

`小王的公钥`+`个人信息`，通过 Hash 算法生成一个`信息摘要`

`证书的私钥` + `信息摘要`，生成一个 `数字签名`

`数字签名` + `小明的公钥`+`个人信息` 就生成了一个`数字证书`。

![Certificate_Encrypted](https://user-images.githubusercontent.com/18217162/62198372-13d93d00-b3b4-11e9-81b9-934556410bf6.png)

小明得到`数字证书`后，用`证书的公钥`解密`数字签名`得到`信息摘要`，然后又用`小王的公钥`+`个人信息`，通过 相同 Hash 算法生成一个`信息摘要`，对比这两个信息摘要是否相同，相同的则表明这个公钥就是小王的。

![WeWork Helper20190731050117](https://user-images.githubusercontent.com/18217162/62198772-da550180-b3b4-11e9-8107-a603279ed5a9.png)


以为这就这就结束了？还没有！

怎么证明这个证书是不是真的呢，会不会是别人伪造的呢？

用其他证书去证明，**证书认证证书，从下到上，呈树形，根节点的证书是内置到系统或浏览器**。

说了这么多到底什么 HTTPS？

### HTTPS 加密是什么？

上文我们知道通过证书认证的非对称加密方式是非常安全的，但是有一个问题就是，这种方式性能非常差，所以采用非对称加密传输秘钥，之后就采用性能更好的的对称加密，这种方式就是 HTTPS 加密。

具体流程如下：

![img do](https://user-images.githubusercontent.com/18217162/62199058-68c98300-b3b5-11e9-975d-42988c56e013.jpg)


### Reference

[刘欣的《码农翻身》之一个故事讲完 HTTPS](https://item.jd.com/12364204.html?dist=jd)


# roxy0724 
 > commented 5 months ago 

`HTTPS`,全称Hypertext Transfer Protocol over Secure Socket Layer，是以安全为目标的`HTTP`通道。`HTTPS`的安全基础是`SSL`，即`HTTP`下加入`SSL`层，需要`SSL`对内容进行加密。
`SSL`，利用数据加密、身份验证和消息完整性验证机制被广泛地用于web浏览器与服务器之间的身份认证和加密数据传输。支持各种应用层协议，提供安全性保证。

- 数据加密：利用对称密钥算法对传输数据进行加密

- 身份验证：基于证书利用数字签名对服务器和客户端进行身份验证

- 消息完整性验证：消息传输过程使用MAC算法检验消息完整性