
 # 45. ä¸ºä»€ä¹ˆ V8 JSå¼•æ“æ›´å¿«ï¼Ÿ 
  
 ***
## Cast1R 
 > commented 6 months ago 

### è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆå¾—æ˜ç™½ V8 å¼•æ“å†…éƒ¨çš„æ¨¡å—åˆ†å·¥ï¼š
![image](https://user-images.githubusercontent.com/43943810/65486169-59a71300-ded6-11e9-83ee-c1352fc46ff1.png)

**æ¦‚å¿µï¼š**
é¦–å…ˆV8 å¼•æ“ä¼šè§£ææºä»£ç å¹¶å°†å…¶è½¬æ¢æˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ã€‚
åŸºäº ASTï¼Œè§£é‡Šå™¨äº§ç”Ÿå­—èŠ‚ç ï¼Œå½“å…¶å†…éƒ¨ JIT å·¥å…·è¿è¡Œå­—èŠ‚ç æ—¶ï¼Œå®ƒä¼šæ”¶é›†åˆ†ææ•°æ®ï¼Œè¿™äº›æ•°æ®æ˜¯ä¼˜åŒ–çš„ä¾æ®ã€‚
å½“å†…éƒ¨æ‰§è¡Œåˆ°æŸä¸ªæ—¶å€™ï¼Œç”Ÿæˆçš„å­—èŠ‚ç å’Œåˆ†ææ•°æ®è¢«ä¼ é€’ç»™ TurboFan ç¼–è¯‘å™¨ï¼ŒåŸºäºåˆ†ææ•°æ®ç”Ÿæˆé«˜åº¦ä¼˜åŒ–çš„æœºå™¨ä»£ç ï¼ˆè¿™äº›æœºå™¨ç ä¸»è¦æ˜¯åŸºäºä¹‹å‰åå¤ç¼–è¯‘çš„å­—èŠ‚ç ï¼Œå½“ç”Ÿæˆæœºå™¨ç åå°±ä¼šç›´æ¥ä½¿ç”¨è¯¥ä¼˜åŒ–åçš„æœºå™¨ç æ›¿æ‰åŸå…ˆçš„å­—èŠ‚ç ï¼‰ã€‚
è¿™æ · JIT ä¸€æ–¹é¢åˆ†æå­—èŠ‚ç ç”Ÿæˆæœ¬åœ°ä»£ç ï¼Œä¸€æ–¹é¢ç»“åˆä¼˜åŒ–çš„æœºå™¨ç ç”Ÿæˆæœ¬åœ°ä»£ç ï¼Œè¿›è¡Œé«˜æ€§èƒ½çš„è¿ä½œã€‚

**é«˜æ€§èƒ½ V8 ç‰¹æ€§ï¼š**
- Runtimeï¼š

```javascript
ä¸»è¦åœ¨è½¬æ¢ JSä»£ç æ—¶ æä¾›è¿è¡Œæ—¶æ‰€éœ€çš„è¾…ç»„å‡½æ•°ï¼šç±»å‹è½¬æ¢ã€ç¼–è¯‘ã€ç®—æœ¯ã€ä½æ“ä½œã€æ¯”è¾ƒã€æ­£åˆ™è¡¨è¾¾å¼ç­‰

```
- é¿å…ç›¸åŒä»£ç é‡å¤ç¼–è¯‘ï¼š

```
æ¦‚å¿µä¸­å·²æåˆ°

```
- SnapShotï¼š

```
å…·ä½“å„ä½å¯ä»¥æŸ¥çœ‹ä¸‹æƒ³å…³æ–‡æ¡£ğŸ˜‚ï¼Œæˆ‘ä¹Ÿè®°ä¸æ¸…äº†

```
### æ€»ç»“
ç»¼ä¸Šï¼Œå…¶å®çŸ¥è¯†ç‚¹æŒºå¤šçš„ï¼Œæˆ‘è¿™é‡Œä¹Ÿåªæ˜¯é˜è¿°äº†ä¸€ä¸‹æˆ‘æ‰€è®°å¾—çš„ï¼Œå„ä½å¯ä»¥ç§¯æè¡¥å……ä¸€ä¸‹ã€‚

## zlx362211854 
 > commented 6 months ago 

1. è™½ç„¶jsä¸æ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼Œä½†æ˜¯v8å¼•æ“æ‰§è¡Œæ—¶ä¼šå°†jsç¼–è¯‘æˆæœºå™¨ç ï¼Œè¿™ä¸ªæœºå™¨ç ä¸åŒäºjavaç¼–è¯‘çš„ä¸­é—´ç ï¼Œè€Œæ˜¯å°†jsè½¬æˆæŠ½è±¡è¯­æ³•æ ‘åç›´æ¥è§£æã€‚
2. å¯¹äºå¯¹è±¡çš„è®¿é—®ï¼Œé‡‡å–äº†å†…å­˜æ¢CPUçš„æ–¹å¼ï¼Œè¿™æ ·å¯¹äºå¯¹è±¡çš„è®¿é—®é€Ÿåº¦ä¹Ÿå°±å˜å¿«äº†ï¼Œæ‰€ä»¥chromeå†…å­˜å ç”¨å¤§ã€‚
3. é«˜æ•ˆçš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œè‡ªåŠ¨ä¾¦æµ‹è¢«ç¨‹åºä¿ç•™ä½†å·²ä¸å†ä½¿ç”¨çš„å­˜å‚¨å™¨ç©ºé—´å¹¶é‡Šæ”¾ã€‚
## goldEli 
 > commented 6 months ago 

* V8 å¼•æ“å°†jsä»£ç ç›´æ¥ç¼–è¯‘æˆæœºå™¨ç ï¼Œçœå»äº†ä¸­é—´è½¬æ¢æˆå­—èŠ‚ç ï¼ˆbytecodeï¼‰å†è½¬æ¢æˆæœºå™¨ç çš„è¿‡ç¨‹ã€‚
* V8 ä½¿ç”¨äº†å¤šçº¿ç¨‹
    * ä¸»çº¿ç¨‹ä¸»è¦å¤„ç†ï¼Œä»£ç è·å–ï¼Œç¼–è¯‘ï¼Œæ‰§è¡Œã€‚
    * è¿˜æœ‰ä¸€ä¸ªçº¿ç¨‹ä¸“é—¨å¤„ç†ç¼–è¯‘ï¼Œä»¥ä¾¿ä¸»çº¿ç¨‹å¤„ç†ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿå¯¹å¯ä»¥å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–
    * ä¸€ä¸ªæ£€æµ‹çº¿ç¨‹ï¼ˆProfilerï¼‰ï¼Œæ£€æµ‹é‚£äº›è€—æ—¶çš„æ–¹æ³•ï¼Œç„¶åå‘Šè¯‰ç¼–è¯‘çš„çº¿ç¨‹è¿›è¡Œä¼˜åŒ–
    * å¤šä¸ªçº¿ç¨‹å¤„ç†åƒåœ¾å›æ”¶

### Reference

* [How JavaScript works: inside the V8 engine + 5 tips on how to write optimized code](https://blog.sessionstack.com/how-javascript-works-inside-the-v8-engine-5-tips-on-how-to-write-optimized-code-ac089e62b12e)