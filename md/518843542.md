
 # 71. æ·±å…‹éš† 
 å®ç°ä¸€ä¸ªæ·±å…‹éš†æ–¹æ³•ã€‚ 
 ***
## Cast1R 
 > commented 5 months ago 


```javascript
const isArray = obj => Object.prototype.toString.call(obj) === '[object Array]';

const deepClone = obj => {
  if(typeof obj !== 'object') {
    return obj;
  }
  const o = isArray(obj) ? [] : {}
  for(let key in obj) {
    if(obj.hasOwnProperty(key)) {
      o[key] = typeof obj[key] === 'object' ? deepClone(obj[key]) : obj[key]; 
    }
  }
  return o;
}

```
## zlx362211854 
 > commented 4 months ago 


```javascript
const deepClone = (obj) => {
return JSON.parse(JSON.stringify(obj))
}

var a = {name: 1}
var b = deepClone(a)
// b: {name: 1}
a === b
false
ğŸ˜„

```
## goldEli 
 > commented 4 months ago 

æ·±å…‹éš†å°±æ˜¯å°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§èµ‹å€¼ç»™å¦ä¸€ä¸ªå¯¹è±¡ã€‚

ä¸æµ…å…‹éš†çš„åŒºåˆ«åœ¨äºï¼Œå½“å±æ€§ä¹Ÿæ˜¯å¯¹è±¡æ—¶ï¼Œè¯¥å±æ€§æ·±å…‹éš†åï¼Œå†…å­˜åœ°å€ä¼šå‘ç”Ÿæ”¹å˜ã€‚

å…‹éš†å¯¹è±¡å¾ˆå®¹æ˜“é‡åˆ°å¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œéœ€è¦å°†æ‰€æœ‰å·²å…‹éš†å±æ€§å­˜åˆ°ä¸€ä¸ªå­—å…¸ä¸­ï¼Œé‡åˆ°å·²ç»å…‹éš†è¿‡çš„å±æ€§å°±ç›´æ¥è¿”å›ï¼Œé¿å…æ­»å¾ªç¯ã€‚

åœ¨åˆ›å»ºå­—å…¸æ—¶ï¼Œå¦‚æœç”¨ `new Map()`ï¼Œ é”®æ˜¯å¼ºå¼•ç”¨ï¼Œåªèƒ½æ‰‹åŠ¨é‡Šæ”¾ï¼Œå½“å¯¹è±¡å¾ˆå¤§ä¼šé€ æˆç©ºé—´æµªè´¹ã€‚æ‰€ä»¥é‡‡ç”¨ `new WeakMap()` ã€‚



```javaScript
const dist = new WeakMap()

const clone = o => {
  if (_isObject(o)) {
    return Object.keys(o).reduce((res, key) => {
      if (_isObject(o[key]) || _isArray(o[key])) {

        // å¤„ç†å¾ªç¯å¼•ç”¨é—®é¢˜
        if (dist.get(o[key])) {
          res[key] = dist.get(o[key])
          return res  
        }
        dist.set(o[key], o[key])

        res[key] = clone(o[key])
        return res
      }
      res[key] = o[key]
      return res
    }, {})
  }
  if (_isArray(o)) {
    return o.map(item => {
      if (_isObject(item) || _isArray(item)) {
        return clone(item)
      }
      return item
    })
  }
  return o
}

const _isObject = obj => {
  return Object.prototype.toString.call(obj) === "[object Object]"
}

const _isArray = arr => {
  return Object.prototype.toString.call(arr) === "[object Array]"
}

```

### Reference
[å¦‚ä½•å†™å‡ºä¸€ä¸ªæƒŠè‰³é¢è¯•å®˜çš„æ·±æ‹·è´?](https://juejin.im/post/5d6aa4f96fb9a06b112ad5b1)